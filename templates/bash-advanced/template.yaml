name: bash-advanced
display_name: Advanced Bash Widget
description: Shell script with sparklines, graphs, tables, and history tracking
language: bash
difficulty: intermediate
author: ServerHub Team
tags:
  - shell
  - graphs
  - tables
  - history

template_file: widget.sh

variables:
  WIDGET_NAME:
    description: Widget identifier (lowercase, hyphens, no spaces)
    required: true
    pattern: "^[a-z0-9-]+$"
    example: "system-monitor"

  WIDGET_TITLE:
    description: Display title shown in dashboard
    required: false
    default: "{{WIDGET_NAME}}"
    example: "System Monitor"

  REFRESH_INTERVAL:
    description: Refresh interval in seconds
    required: false
    default: "5"
    pattern: "^[0-9]+$"
    example: "10"

  AUTHOR:
    description: Widget author name
    required: false
    default: "{{USER}}"
    example: "John Doe"

  DESCRIPTION:
    description: Widget description
    required: false
    default: "Advanced monitoring for {{WIDGET_TITLE}}"
    example: "Advanced system monitoring with graphs"

  CACHE_FILE:
    description: Path to history cache file
    required: false
    default: "$HOME/.cache/serverhub/{{WIDGET_NAME}}-history.txt"
    example: "/tmp/widget-history.txt"

  MAX_SAMPLES:
    description: Maximum number of history samples to keep
    required: false
    default: "30"
    pattern: "^[0-9]+$"
    example: "50"

post_creation:
  - "Make the widget executable: chmod +x {{OUTPUT_FILE}}"
  - "Test the widget: serverhub test-widget {{OUTPUT_FILE}}"
  - "Test extended mode: serverhub test-widget {{OUTPUT_FILE}} --extended"
  - "Add to config: serverhub --discover"
